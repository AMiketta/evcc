var he=Object.defineProperty,me=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var H=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var G=(e,o,a)=>o in e?he(e,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[o]=a,R=(e,o)=>{for(var a in o||(o={}))pe.call(o,a)&&G(e,a,o[a]);if(H)for(var a of H(o))fe.call(o,a)&&G(e,a,o[a]);return e},O=(e,o)=>me(e,ge(o));import{a as ne,r as ve,b as g,c as l,d as h,w as x,o as i,e as v,t as s,f as t,g as m,F as C,h as I,i as U,v as _e,n as _,j as b,k as ae,l as oe,m as $,p as T,q as y,s as w,u as S,x as be,y as ye,z as we,T as ie,A as k,B as Se,C as Ce,D as $e,E as Te,G as ke,H as xe,I as Ie,J as Pe,K as De,L as Ne}from"./vendor.b43ec9b3.js";const Le=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))d(c);new MutationObserver(c=>{for(const n of c)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&d(r)}).observe(document,{childList:!0,subtree:!0});function a(c){const n={};return c.integrity&&(n.integrity=c.integrity),c.referrerpolicy&&(n.referrerPolicy=c.referrerpolicy),c.crossorigin==="use-credentials"?n.credentials="include":c.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(c){if(c.ep)return;c.ep=!0;const n=a(c);fetch(c.href,n)}};Le();const{protocol:Ae,hostname:Ee,port:Z,pathname:Ve}=window.location,N=ne.create({baseURL:Ae+"//"+Ee+(Z?":"+Z:"")+Ve+"api/",headers:{Accept:"application/json"}});N.interceptors.response.use(e=>e,e=>{const o=e.config.baseURL+e.config.url,a=`${e.message}: API request failed ${o}`;window.app.error({message:a})});function se(e,o,a){const d=o.shift();if(e[d]||(e[d]={}),!o.length){a&&typeof a=="object"&&!Array.isArray(a)?e[d]=R(R({},e[d]),a):e[d]=a;return}se(e[d],o,a)}const q=ve({loadpoints:[]}),z={state:q,update:function(e){Object.keys(e).forEach(function(o){typeof window.app[o]=="function"?window.app[o]({message:e[o]}):se(q,o.split("."),e[o])})}};var f=(e,o)=>{const a=e.__vccOpts||e;for(const[d,c]of o)a[d]=c;return a};const Me={name:"App",props:{notifications:Array},created:function(){const e=new URLSearchParams(window.location.search);this.compact=e.get("compact"),setTimeout(this.connect,0)},methods:{connect:function(){if(!("WebSocket"in window)){window.app.error({message:"Web sockets not supported. Please upgrade your browser."});return}const o=window.location,d=(o.protocol=="https:"?"wss:":"ws:")+"//"+o.hostname+(o.port?":"+o.port:"")+o.pathname+"ws",c=new WebSocket(d);c.onerror=()=>{c.close()},c.onclose=()=>{window.setTimeout(this.connect,1e3)},c.onmessage=n=>{try{var r=JSON.parse(n.data);z.update(r)}catch(u){window.app.error({message:`Failed to parse web socket data: ${u.message} [${n.data}]`})}}},reload(){window.location.reload()}},metaInfo(){return{title:z.state.siteTitle||""}}},Re={class:"app overflow-hidden"};function Be(e,o,a,d,c,n){const r=g("metainfo"),u=g("router-view");return i(),l("div",Re,[h(r,null,{title:x(({content:p})=>[v(s(p?`${p} | evcc`:"evcc"),1)]),_:1}),h(u,{notifications:a.notifications},null,8,["notifications"])])}var Ue=f(Me,[["render",Be],["__scopeId","data-v-20b759b0"]]);const{protocol:ze,hostname:je,port:Y,pathname:Fe}=window.location,j=ne.create({baseURL:ze+"//"+je+(Y?":"+Y:"")+Fe+"/"});j.interceptors.response.use(e=>e,e=>{const o=e.config.baseURL+e.config.url,a=`${e.message}: API request failed ${o}`;window.app.error({message:a})});const We={name:"TopNavigation",props:{vehicleLogins:{type:Object,default:()=>({})}},computed:{logoutCount(){return this.providerLogins.filter(e=>!e.loggedIn).length},providerLogins(){return Object.entries(this.vehicleLogins).map(([e,o])=>({title:e,loggedIn:o.authenticated,loginPath:o.uri+"/login",logoutPath:o.uri+"/logout"}))}},methods:{handleProviderAuthorization:async function(e){e.loggedIn?j.post(e.logoutPath):j.post(e.loginPath).then(function(o){window.location.href=o.data.loginUri})}}},Ke={type:"button","data-bs-toggle":"dropdown","data-bs-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",class:"btn btn-sm btn-outline-secondary position-relative"},He={key:0,class:"position-absolute top-0 start-100 translate-middle p-2 bg-danger border border-light rounded-circle"},Ge=t("span",{class:"visually-hidden"},"login available",-1),Oe=[Ge],Ze=t("shopicon-regular-menu",null,null,-1),qe={class:"dropdown-menu dropdown-menu-end"},Ye={class:"dropdown-item",href:"https://docs.evcc.io/blog/",target:"_blank"},Je={class:"dropdown-item",href:"https://docs.evcc.io/docs/Home/",target:"_blank"},Qe={class:"dropdown-item",href:"https://github.com/evcc-io/evcc",target:"_blank"},Xe={class:"dropdown-item",href:"https://evcc.io/",target:"_blank"},et=t("li",null,[t("hr",{class:"dropdown-divider"})],-1),tt={class:"dropdown-header"},nt=["onClick"],at={key:0,class:"d-inline-block p-1 rounded-circle bg-danger border border-light rounded-circle"};function ot(e,o,a,d,c,n){return i(),l("div",null,[t("button",Ke,[n.logoutCount>0?(i(),l("span",He,Oe)):m("v-if",!0),Ze]),t("ul",qe,[t("li",null,[t("a",Ye,s(e.$t("header.blog")),1)]),t("li",null,[t("a",Je,s(e.$t("header.docs")),1)]),t("li",null,[t("a",Qe,s(e.$t("header.github")),1)]),t("li",null,[t("a",Xe,s(e.$t("header.about")),1)]),n.providerLogins.length>0?(i(),l(C,{key:0},[et,t("li",null,[t("h6",tt,s(e.$t("header.login")),1)]),(i(!0),l(C,null,I(n.providerLogins,r=>(i(),l("li",{key:r.title},[t("button",{type:"button",class:"dropdown-item",onClick:u=>n.handleProviderAuthorization(r)},[r.loggedIn?m("v-if",!0):(i(),l("span",at)),v(" "+s(r.title)+" "+s(e.$t(r.loggedIn?"main.provider.logout":"main.provider.login")),1)],8,nt)]))),128))],64)):m("v-if",!0)])])}var it=f(We,[["render",ot]]),P={data:function(){return{fmtLimit:100,fmtDigits:1}},methods:{round:function(e,o){var a=10**o;return(Math.round(e*a)/a).toFixed(o)},fmt:function(e){return e==null?0:(e=Math.abs(e),e>=this.fmtLimit?this.round(e/1e3,this.fmtDigits):this.round(e,0))},fmtKw:function(e=0,o=!0,a=!0){const d=o?1:0,c=o?e/1e3:e;let n="";return a&&(n=o?" kW":" W"),`${new Intl.NumberFormat(this.$i18n.locale,{style:"decimal",minimumFractionDigits:d,maximumFractionDigits:d}).format(c)}${n}`},fmtUnit:function(e){return Math.abs(e)>=this.fmtLimit?"k":""},fmtDuration:function(e){if(e<=0||e==null)return"\u2014";var o="0"+e%60,a="0"+Math.floor(e/60)%60,d=""+Math.floor(e/3600);return d.length<2&&(d="0"+d),d+":"+a.substr(-2)+":"+o.substr(-2)},fmtShortDuration:function(e=0,o=!1){if(e<=0)return"\u2014";var a=e%60,d=Math.floor(e/60)%60,c=Math.floor(e/3600),n="";return c>=1?n=c+":"+`${d}`.padStart(2,"0"):d>=1?n=d+":"+`${a}`.padStart(2,"0"):n=`${a}`,o&&(n+=this.fmtShortDurationUnit(e)),n},fmtShortDurationUnit:function(e=0){if(e<=0)return"";var o=Math.floor(e/60)%60,a=Math.floor(e/3600);return a>=1?"h":o>=1?"m":"s"},fmtDayString:function(e){const o=`${e.getFullYear()}`,a=`${e.getMonth()+1}`.padStart(2,"0"),d=`${e.getDate()}`.padStart(2,"0");return`${o}-${a}-${d}`},fmtTimeString:function(e){const o=`${e.getHours()}`.padStart(2,"0"),a=`${e.getMinutes()}`.padStart(2,"0");return`${o}:${a}`},fmtAbsoluteDate:function(e){return new Intl.DateTimeFormat(this.$i18n.locale,{weekday:"short",hour:"numeric",minute:"numeric"}).format(e)},fmtMoney:function(e=0,o="EUR"){return new Intl.NumberFormat(this.$i18n.locale,{style:"currency",currency:o}).format(e)},fmtPricePerKWh:function(e=0,o="EUR"){let a=o,d=e,c=3;return["EUR","USD"].includes(o)&&(d*=100,a="ct",c=1),`${new Intl.NumberFormat(this.$i18n.locale,{style:"decimal",maximumFractionDigits:c}).format(d)} ${a}/kWh`},fmtTimeAgo:function(e){const o={day:864e5,hour:36e5,minute:6e4,second:1e3},a=new Intl.RelativeTimeFormat(this.$i18n.locale,{numeric:"auto"});for(var d in o)if(Math.abs(e)>o[d]||d=="second")return a.format(Math.round(e/o[d]),d)}}};const st={name:"Notifications",mixins:[P],props:{notifications:Array},computed:{iconVisible:function(){return this.notifications.length>0},iconClass:function(){return this.notifications.find(e=>e.type==="error")?"text-danger":"text-warning"}},created:function(){this.interval=setInterval(()=>{this.$forceUpdate()},10*1e3)},unmounted:function(){clearTimeout(this.interval)},methods:{clear:function(){window.app&&window.app.clear()}}},rt={href:"#","data-bs-toggle":"modal","data-bs-target":"#notificationModal",class:"btn btn-sm btn-link text-decoration-none link-light text-nowrap"},lt={id:"notificationModal",class:"modal fade text-dark",tabindex:"-1",role:"dialog","aria-hidden":"true","data-bs-backdrop":"true"},ct={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",role:"document"},dt={class:"modal-content"},ut={class:"modal-header"},ht={class:"modal-title"},mt=t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),gt={class:"modal-body"},pt=["title"],ft={class:"d-flex align-items-baseline"},vt={class:"flex-grow-1 px-2 py-1 text-break"},_t={key:0,class:"badge rounded-pill bg-secondary"},bt={class:"modal-footer"};function yt(e,o,a,d,c,n){return i(),l("div",null,[U(t("button",rt,[t("shopicon-regular-exclamationtriangle",{class:_(n.iconClass)},null,2)],512),[[_e,n.iconVisible]]),t("div",lt,[t("div",ct,[t("div",dt,[t("div",ut,[t("h5",ht,s(e.$t("notifications.modalTitle")),1),mt]),t("div",gt,[(i(!0),l(C,null,I(a.notifications,(r,u)=>(i(),l("div",{key:u},[t("small",{class:"d-flex justify-content-end mt-3",title:e.fmtAbsoluteDate(r.time)},s(e.fmtTimeAgo(r.time-new Date)),9,pt),t("p",ft,[t("shopicon-regular-exclamationtriangle",{class:_([{"text-danger":r.type==="error","text-warning":r.type==="warn"},"flex-grow-0 d-block"])},null,2),t("span",vt,s(r.message),1),r.count>1?(i(),l("span",_t,s(r.count),1)):m("v-if",!0)])]))),128))]),t("div",bt,[t("button",{type:"button","data-bs-dismiss":"modal","aria-label":"Close",class:"btn btn-outline-secondary",onClick:o[0]||(o[0]=(...r)=>n.clear&&n.clear(...r))},s(e.$t("notifications.dismissAll")),1)])])])])])}var wt=f(st,[["render",yt]]);const St={name:"BatteryIcon",props:{soc:{type:Number,default:0}},computed:{icon:function(){return this.soc>80?"batteryfull":this.soc>60?"batterythreequarters":this.soc>40?"batteryhalf":this.soc>20?"batteryquarter":"batteryempty"}}};function Ct(e,o,a,d,c,n){return i(),b(ae(`shopicon-regular-${n.icon}`))}var re=f(St,[["render",Ct]]);const $t={name:"LabelBar",props:{value:{type:Number,default:0},hideIcon:{type:Boolean},top:{type:Boolean},bottom:{type:Boolean},first:{type:Boolean},last:{type:Boolean}}},Tt={class:"label-bar-scale"},kt={class:"label-bar-icon"};function xt(e,o,a,d,c,n){return i(),l("div",{class:_(["label-bar",{"label-bar--hide-icon":a.hideIcon,"label-bar--hidden":!a.value,"label-bar--top":a.top,"label-bar--bottom":a.bottom,"label-bar--first":a.first,"label-bar--last":a.last}])},[t("div",Tt,[t("div",kt,[oe(e.$slots,"default",{},void 0,!0)])])],2)}var It=f($t,[["render",xt],["__scopeId","data-v-4b62bda7"]]);const Pt={name:"Visualization",components:{BatteryIcon:re,LabelBar:It},mixins:[P],props:{gridImport:{type:Number,default:0},selfConsumption:{type:Number,default:0},pvExport:{type:Number,default:0},loadpoints:{type:Number,default:0},batteryCharge:{type:Number,default:0},batteryDischarge:{type:Number,default:0},pvProduction:{type:Number,default:0},homePower:{type:Number,default:0},batterySoC:{type:Number,default:0},valuesInKw:{type:Boolean,default:!1}},data:function(){return{width:0,visualizationReady:!1}},computed:{gridExport:function(){return this.applyThreshold(this.pvExport)},totalRaw:function(){return this.gridImport+this.selfConsumption+this.pvExport},gridImportAdjusted:function(){return this.applyThreshold(this.gridImport)},selfConsumptionAdjusted:function(){return this.applyThreshold(this.selfConsumption)},pvExportAdjusted:function(){return this.applyThreshold(this.pvExport)},totalAdjusted:function(){return this.gridImportAdjusted+this.selfConsumptionAdjusted+this.pvExportAdjusted}},watch:{totalAdjusted:function(){!this.visualizationReady&&this.totalAdjusted>0&&setTimeout(()=>{this.visualizationReady=!0},500)}},mounted:function(){this.$nextTick(function(){window.addEventListener("resize",this.updateElementWidth),this.updateElementWidth()})},beforeUnmount(){window.removeEventListener("resize",this.updateElementWidth)},methods:{widthTotal:function(e){return this.totalAdjusted===0?"0%":100/this.totalAdjusted*e+"%"},kw:function(e){return this.fmtKw(e,this.valuesInKw,!0)},kwNoUnit:function(e){return this.fmtKw(e,this.valuesInKw,!1)},powerLabelAvailableSpace(e){if(this.totalAdjusted===0)return 0;const o=100/this.totalAdjusted*e;return this.width/100*o},powerLabelEnoughSpace(e){return this.powerLabelAvailableSpace(e)>60},powerLabelSomeSpace(e){return this.powerLabelAvailableSpace(e)>35},hideLabelIcon(e,o=32){if(this.totalAdjusted===0)return!0;const a=100/this.totalAdjusted*e;return this.width/100*a<o},applyThreshold(e){return 100/this.totalRaw*e<2?0:e},updateElementWidth(){this.width=this.$refs.site_progress.getBoundingClientRect().width},labelBarProps(e,o){const a=this[o],d=40;return{value:a,hideIcon:this.hideLabelIcon(a,d),style:{width:this.widthTotal(a)},[e]:!0}}}},L=e=>(w("data-v-0ea42dac"),e=e(),S(),e),Dt={class:"label-scale d-flex"},Nt={class:"d-flex justify-content-start flex-grow-1"},Lt=L(()=>t("shopicon-regular-sun",null,null,-1)),At=L(()=>t("shopicon-regular-powersupply",null,null,-1)),Et=L(()=>t("div",{class:"label-scale-name"},"In",-1)),Vt={ref:"site_progress",class:"site-progress"},Mt={key:0,class:"power"},Rt={key:1,class:"power"},Bt={key:0,class:"power"},Ut={key:1,class:"power"},zt={key:0,class:"power"},jt={key:1,class:"power"},Ft={key:0,class:"site-progress-bar bg-light border no-wrap w-100"},Wt={class:"label-scale d-flex"},Kt={class:"d-flex justify-content-start flex-grow-1"},Ht=L(()=>t("shopicon-regular-home",null,null,-1)),Gt=L(()=>t("shopicon-regular-car3",null,null,-1)),Ot=L(()=>t("shopicon-regular-powersupply",null,null,-1)),Zt=L(()=>t("div",{class:"label-scale-name"},"Out",-1));function qt(e,o,a,d,c,n){const r=g("LabelBar"),u=g("BatteryIcon");return i(),l("div",{class:_(["visualization",{"visualization--ready":e.visualizationReady}])},[t("div",Dt,[t("div",Nt,[h(r,$(T(n.labelBarProps("top","pvProduction"))),{default:x(()=>[Lt]),_:1},16),h(r,$(T(n.labelBarProps("top","batteryDischarge"))),{default:x(()=>[h(u,{soc:a.batterySoC},null,8,["soc"])]),_:1},16),h(r,$(T(n.labelBarProps("top","gridImport"))),{default:x(()=>[At]),_:1},16)]),Et]),t("div",Vt,[t("div",{class:"site-progress-bar self-consumption",style:y({width:n.widthTotal(n.selfConsumptionAdjusted)})},[n.powerLabelEnoughSpace(a.selfConsumption)?(i(),l("span",Mt,s(n.kw(a.selfConsumption)),1)):n.powerLabelSomeSpace(a.selfConsumption)?(i(),l("span",Rt,s(n.kwNoUnit(a.selfConsumption)),1)):m("v-if",!0)],4),t("div",{class:"site-progress-bar grid-import",style:y({width:n.widthTotal(n.gridImportAdjusted)})},[n.powerLabelEnoughSpace(a.gridImport)?(i(),l("span",Bt,s(n.kw(a.gridImport)),1)):n.powerLabelSomeSpace(a.gridImport)?(i(),l("span",Ut,s(n.kwNoUnit(a.gridImport)),1)):m("v-if",!0)],4),t("div",{class:"site-progress-bar pv-export",style:y({width:n.widthTotal(n.pvExportAdjusted)})},[n.powerLabelEnoughSpace(a.pvExport)?(i(),l("span",zt,s(n.kw(a.pvExport)),1)):n.powerLabelSomeSpace(a.pvExport)?(i(),l("span",jt,s(n.kwNoUnit(a.pvExport)),1)):m("v-if",!0)],4),n.totalAdjusted<=0?(i(),l("div",Ft,[t("span",null,s(e.$t("main.energyflow.noEnergy")),1)])):m("v-if",!0)],512),t("div",Wt,[t("div",Kt,[h(r,$(T(n.labelBarProps("bottom","homePower"))),{default:x(()=>[Ht]),_:1},16),h(r,$(T(n.labelBarProps("bottom","loadpoints"))),{default:x(()=>[Gt]),_:1},16),h(r,$(T(n.labelBarProps("bottom","batteryCharge"))),{default:x(()=>[h(u,{soc:a.batterySoC},null,8,["soc"])]),_:1},16),h(r,$(T(n.labelBarProps("bottom","gridExport"))),{default:x(()=>[Ot]),_:1},16)]),Zt])],2)}var Yt=f(Pt,[["render",qt],["__scopeId","data-v-0ea42dac"]]);const Jt={name:"EnergyflowEntry",components:{BatteryIcon:re},mixins:[P],props:{name:{type:String},icon:{type:String},power:{type:Number},soc:{type:Number},valuesInKw:{type:Boolean}},computed:{active:function(){return this.power>10},isBattery:function(){return this.icon==="battery"},hasSoC:function(){return this.isBattery&&!isNaN(this.soc)}},methods:{kw:function(e){return this.fmtKw(e,this.valuesInKw)}}},Qt={class:"d-flex flex-nowrap"},Xt={class:"text-nowrap flex-grow-1 ms-3"},en={class:"text-end text-nowrap ps-1 fw-bold"},tn={key:0};function nn(e,o,a,d,c,n){const r=g("BatteryIcon");return i(),l("div",{class:_(["d-flex justify-content-between mb-2 entry",{"opacity-25":!n.active}])},[t("span",Qt,[n.isBattery?(i(),b(r,{key:0,soc:a.soc},null,8,["soc"])):(i(),b(ae(`shopicon-regular-${a.icon}`),{key:1}))]),t("span",Xt,s(a.name),1),t("span",en,[n.hasSoC?(i(),l("span",tn,s(a.soc)+"% / ",1)):m("v-if",!0),v(s(n.kw(a.power)),1)])],2)}var an=f(Jt,[["render",nn],["__scopeId","data-v-37526a38"]]);const on={name:"Energyflow",components:{Visualization:Yt,EnergyflowEntry:an},mixins:[P],props:{gridConfigured:Boolean,gridPower:{type:Number,default:0},homePower:{type:Number,default:0},pvConfigured:Boolean,pvPower:{type:Number,default:0},loadpointsPower:{type:Number,default:0},activeLoadpointsCount:{type:Number,default:0},batteryConfigured:Boolean,batteryPower:{type:Number,default:0},batterySoC:{type:Number,default:0}},computed:{gridImport:function(){return Math.max(0,this.gridPower)},pvProduction:function(){return this.pvConfigured?Math.abs(this.pvPower):this.pvExport},batteryPowerAdjusted:function(){return Math.abs(this.batteryPower)<50?0:this.batteryPower},batteryDischarge:function(){return Math.abs(Math.max(0,this.batteryPowerAdjusted))},batteryCharge:function(){return Math.abs(Math.min(0,this.batteryPowerAdjusted)*-1)},selfConsumption:function(){const e=this.batteryDischarge+this.pvProduction,o=this.homePower+this.batteryCharge+this.loadpointsPower;return Math.min(e,o)},pvExport:function(){return Math.max(0,this.gridPower*-1)},valuesInKw:function(){return this.gridImport+this.selfConsumption+this.pvExport>1e3},inPower:function(){return this.gridImport+this.pvProduction+this.batteryDischarge},outPower:function(){return this.homePower+this.loadpointsPower+this.pvExport+this.batteryCharge}},methods:{kw:function(e){return this.fmtKw(e,this.valuesInKw)},toggleDetails:function(){this.$emit("toggle-details")}}},M=e=>(w("data-v-3bddf544"),e=e(),S(),e),sn={class:"energyflow"},rn={class:"details"},ln={class:"details-inner row","data-collapsible-details":""},cn={class:"col-12 d-flex justify-content-between pt-2 mb-4"},dn={class:"d-flex flex-nowrap"},un=M(()=>t("span",{class:"color-self me-2"},[t("shopicon-filled-square")],-1)),hn={key:0,class:"d-flex flex-nowrap"},mn=M(()=>t("span",{class:"color-grid ms-2"},[t("shopicon-filled-square")],-1)),gn={key:1,class:"d-flex flex-nowrap"},pn=M(()=>t("span",{class:"color-export ms-2"},[t("shopicon-filled-square")],-1)),fn={class:"col-12 col-md-6 pe-md-5 pb-4 d-flex flex-column justify-content-between"},vn={class:"d-flex justify-content-between align-items-end mb-4"},_n=M(()=>t("h3",{class:"m-0"},"In",-1)),bn={class:"fw-bold opacity-25"},yn={class:"col-12 col-md-6 ps-md-5 pb-4 d-flex flex-column justify-content-between"},wn={class:"d-flex justify-content-between align-items-end mb-4"},Sn=M(()=>t("h3",{class:"m-0"},"Out",-1)),Cn={class:"fw-bold opacity-25"};function $n(e,o,a,d,c,n){const r=g("Visualization"),u=g("EnergyflowEntry");return i(),l("div",sn,[t("div",{class:"row cursor-pointer",onClick:o[0]||(o[0]=(...p)=>n.toggleDetails&&n.toggleDetails(...p))},[h(r,{class:"col-12 mb-3",gridImport:n.gridImport,selfConsumption:n.selfConsumption,loadpoints:a.loadpointsPower,pvExport:n.pvExport,batteryCharge:n.batteryCharge,batteryDischarge:n.batteryDischarge,pvProduction:n.pvProduction,homePower:a.homePower,batterySoC:a.batterySoC,valuesInKw:n.valuesInKw},null,8,["gridImport","selfConsumption","loadpoints","pvExport","batteryCharge","batteryDischarge","pvProduction","homePower","batterySoC","valuesInKw"])]),t("div",rn,[t("div",ln,[t("div",cn,[t("div",dn,[un,t("span",null,s(e.$t("main.energyflow.selfConsumption")),1)]),n.gridImport>0?(i(),l("div",hn,[t("span",null,s(e.$t("main.energyflow.gridImport")),1),mn])):(i(),l("div",gn,[t("span",null,s(e.$t("main.energyflow.pvExport")),1),pn]))]),t("div",fn,[t("div",vn,[_n,t("span",bn,s(n.kw(n.inPower)),1)]),t("div",null,[h(u,{name:e.$t("main.energyflow.pvProduction"),icon:"sun",power:n.pvProduction,valuesInKw:n.valuesInKw},null,8,["name","power","valuesInKw"]),a.batteryConfigured?(i(),b(u,{key:0,name:e.$t("main.energyflow.batteryDischarge"),icon:"battery",soc:a.batterySoC,power:n.batteryDischarge,valuesInKw:n.valuesInKw},null,8,["name","soc","power","valuesInKw"])):m("v-if",!0),h(u,{name:e.$t("main.energyflow.gridImport"),icon:"powersupply",power:n.gridImport,valuesInKw:n.valuesInKw},null,8,["name","power","valuesInKw"])])]),t("div",yn,[t("div",wn,[Sn,t("span",Cn,s(n.kw(n.outPower)),1)]),t("div",null,[h(u,{name:e.$t("main.energyflow.homePower"),icon:"home",power:a.homePower,valuesInKw:n.valuesInKw},null,8,["name","power","valuesInKw"]),h(u,{name:e.$tc("main.energyflow.loadpoints",a.activeLoadpointsCount,{count:a.activeLoadpointsCount}),icon:"car3",power:a.loadpointsPower,valuesInKw:n.valuesInKw},null,8,["name","power","valuesInKw"]),a.batteryConfigured?(i(),b(u,{key:0,name:e.$t("main.energyflow.batteryCharge"),icon:"battery",soc:a.batterySoC,power:n.batteryCharge,valuesInKw:n.valuesInKw},null,8,["name","soc","power","valuesInKw"])):m("v-if",!0),h(u,{name:e.$t("main.energyflow.pvExport"),icon:"powersupply",power:n.pvExport,valuesInKw:n.valuesInKw},null,8,["name","power","valuesInKw"])])])])])])}var J=f(on,[["render",$n],["__scopeId","data-v-3bddf544"]]);const Tn={name:"Mode",props:{mode:String},data(){return{modes:["off","now","minpv","pv"]}},methods:{isActive:function(e){return this.mode===this.mapToOldModes(e)},setTargetMode:function(e){this.$emit("updated",this.mapToOldModes(e))},mapToOldModes:function(e){return{fast:"now",cheap:"pv"}[e]||e}}},kn={key:0,class:"mode-group border d-inline-flex",role:"group"},xn=["onClick"],In={key:1,class:"mode-group border d-inline-flex",role:"group"},Pn=["onClick"],Dn={class:"d-inline d-sm-none"},Nn={class:"d-none d-sm-inline"};function Ln(e,o,a,d,c,n){return e.$hiddenFeatures?(i(),l("div",kn,[(i(),l(C,null,I(["fast","cheap"],r=>t("button",{key:r,type:"button",class:_(["btn",{active:n.isActive(r)}]),onClick:u=>n.setTargetMode(r)},s(e.$t(`main.mode.${r}`)),11,xn)),64))])):(i(),l("div",In,[(i(!0),l(C,null,I(c.modes,r=>(i(),l("button",{key:r,type:"button",class:_(["btn",{active:n.isActive(r)}]),onClick:u=>n.setTargetMode(r)},[t("span",Dn,s(e.$t(`main.mode.${r}Short`)),1),t("span",Nn,s(e.$t(`main.mode.${r}Long`)),1)],10,Pn))),128))]))}var An=f(Tn,[["render",Ln],["__scopeId","data-v-7b993764"]]),A={methods:{collectProps:function(e){let o={};for(var a in e.props)o[a]=this[a];return o}}};const En={name:"LabelAndValue",props:{label:String,value:String,extraValue:String}},Vn={class:"root"},Mn={class:"mb-2 label"},Rn={class:"value m-0"},Bn={key:0,class:"extraValue"},Un=v(" / "),zn={class:"text-nowrap"};function jn(e,o,a,d,c,n){return i(),l("div",Vn,[t("div",Mn,s(a.label),1),oe(e.$slots,"default",{},()=>[t("h3",Rn,[v(s(a.value)+" ",1),a.extraValue?(i(),l("span",Bn,[Un,t("span",zn,s(a.extraValue),1)])):m("v-if",!0)])],!0)])}var W=f(En,[["render",jn],["__scopeId","data-v-6d5d6c06"]]);const Fn={name:"VehicleSoc",props:{connected:Boolean,vehiclePresent:Boolean,vehicleSoC:Number,enabled:Boolean,charging:Boolean,minSoC:Number,targetSoC:Number},data:function(){return{selectedTargetSoC:null,interactionStartScreenY:null}},computed:{vehicleSoCDisplayWidth:function(){return this.vehiclePresent&&this.vehicleSoC>=0?this.vehicleSoC:100},progressColor:function(){return this.minSoCActive?"bg-danger":"bg-primary"},minSoCActive:function(){return this.minSoC>0&&this.vehicleSoC<this.minSoC},remainingSoCWidth:function(){return this.vehicleSoCDisplayWidth===100?null:this.minSoCActive?this.minSoC-this.vehicleSoC:this.visibleTargetSoC>this.vehicleSoC?this.visibleTargetSoC-this.vehicleSoC:null},visibleTargetSoC:function(){return Number(this.selectedTargetSoC||this.targetSoC)}},watch:{targetSoC:function(){this.selectedTargetSoC=this.targetSoC}},methods:{changeTargetSoCStart:function(e){const o=e.screenY||e.changedTouches[0].screenY;this.interactionStartScreenY=o},changeTargetSoCEnd:function(e){const o=e.screenY||e.changedTouches[0].screenY;if(Math.abs(o-this.interactionStartScreenY)>80)return e.preventDefault(),e.target.value=this.targetSoC,this.selectedTargetSoC=this.targetSoC,!1;e.target.value!==this.targetSoC&&this.$emit("target-soc-updated",e.target.value)},movedTargetSoC:function(e){return e.target.value<20?(e.target.value=20,this.selectedTargetSoC=e.target.value,e.preventDefault(),!1):(this.selectedTargetSoC=e.target.value,!0)}}},Wn={class:"vehicle-soc"},Kn={class:"progress"},Hn={class:"target"},Gn=["value"];function On(e,o,a,d,c,n){return i(),l("div",Wn,[t("div",Kn,[t("div",{class:_(["progress-bar",{[n.progressColor]:!0,"progress-bar-striped":a.charging,"progress-bar-animated":a.charging}]),role:"progressbar",style:y({width:`${n.vehicleSoCDisplayWidth}%`})},null,6),n.remainingSoCWidth>0&&a.enabled?(i(),l("div",{key:0,class:_(["progress-bar bg-muted",n.progressColor]),role:"progressbar",style:y({width:`${n.remainingSoCWidth}%`,transition:"none"})},null,6)):m("v-if",!0)]),t("div",Hn,[t("div",{class:"target-label d-flex align-items-center justify-content-center",style:y({left:`${n.visibleTargetSoC}%`})},null,4),a.vehiclePresent?(i(),l("input",{key:0,type:"range",min:"0",max:"100",step:"5",value:n.visibleTargetSoC,class:"target-slider",onInput:o[0]||(o[0]=(...r)=>n.movedTargetSoC&&n.movedTargetSoC(...r)),onMousedown:o[1]||(o[1]=(...r)=>n.changeTargetSoCStart&&n.changeTargetSoCStart(...r)),onTouchstart:o[2]||(o[2]=(...r)=>n.changeTargetSoCStart&&n.changeTargetSoCStart(...r)),onMouseup:o[3]||(o[3]=(...r)=>n.changeTargetSoCEnd&&n.changeTargetSoCEnd(...r)),onTouchend:o[4]||(o[4]=(...r)=>n.changeTargetSoCEnd&&n.changeTargetSoCEnd(...r))},null,40,Gn)):m("v-if",!0)])])}var Q=f(Fn,[["render",On],["__scopeId","data-v-2cc325bc"]]);const Zn={name:"VehicleStatus",mixins:[A,P],props:{vehicleSoC:Number,minSoC:Number,enabled:Boolean,connected:Boolean,charging:Boolean,targetTime:String,phaseAction:String,phaseRemainingInterpolated:Number,pvAction:String,pvRemainingInterpolated:Number},computed:{phaseTimerActive(){return this.charging&&this.phaseRemainingInterpolated>0&&["scale1p","scale3p"].includes(this.phaseAction)},pvTimerActive(){return this.pvRemainingInterpolated>0&&["enable","disable"].includes(this.pvAction)},message:function(){const e=(o,a)=>this.$t(`main.vehicleStatus.${o}`,a);if(this.minSoC>0&&this.vehicleSoC<this.minSoC)return e("minCharge",{soc:this.minSoC});if(this.targetTime){const o=new Date(this.targetTime),a={time:this.fmtAbsoluteDate(o)};return this.charging?e("targetChargeActive",a):this.enabled?e("targetChargeWaitForVehicle",a):e("targetChargePlanned",a)}return this.pvTimerActive&&!this.enabled&&this.pvAction==="enable"?e("pvEnable",{remaining:this.fmtShortDuration(this.pvRemainingInterpolated,!0)}):this.enabled&&!this.charging?e("waitForVehicle"):this.pvTimerActive&&this.charging&&this.pvAction==="disable"?e("pvDisable",{remaining:this.fmtShortDuration(this.pvRemainingInterpolated,!0)}):this.phaseTimerActive?e(this.phaseAction,{remaining:this.fmtShortDuration(this.phaseRemainingInterpolated,!0)}):this.charging?e("charging"):this.connected?e("connected"):""}}},qn={class:"d-block text-gray"};function Yn(e,o,a,d,c,n){return i(),l("div",qn,s(n.message)+"\xA0",1)}var X=f(Zn,[["render",Yn]]);const Jn=7,Qn={name:"TargetCharge",components:{LabelAndValue:W},mixins:[P],props:{id:[String,Number],targetTime:String,targetTimeActive:Boolean,targetTimeHourSuggestion:Number,targetSoC:Number},data:function(){return{selectedDay:null,selectedTime:null}},computed:{targetChargeEnabled:function(){return this.targetTime},selectedTargetTimeValid:function(){return new Date<this.selectedTargetTime},selectedTargetTime:function(){return new Date(`${this.selectedDay}T${this.selectedTime||"00:00"}`)},modalId:function(){return`targetChargeModal_${this.id}`}},watch:{targetTimeLabel:function(){const e=new Date(this.targetTime);return this.$t("main.targetCharge.activeLabel",{time:this.fmtAbsoluteDate(e)})},targetTime(){this.initInputFields()}},mounted:function(){this.initInputFields()},methods:{targetTimeLabel:function(){if(this.targetChargeEnabled){const e=new Date(this.targetTime);return this.$t("main.targetCharge.activeLabel",{time:this.fmtAbsoluteDate(e)})}return this.$t("main.targetCharge.inactiveLabel")},defaultDate:function(){const e=new Date;return e.setSeconds(0),e.setMinutes(0),Number.isInteger(this.targetTimeHourSuggestion)?e.setUTCHours(this.targetTimeHourSuggestion):e.setHours(Jn),e<new Date&&e.setDate(e.getDate()+1),e},initInputFields:function(){let e=this.defaultDate(),o=new Date(this.targetTime)>new Date;this.targetChargeEnabled&&o&&(e=new Date(this.targetTime)),this.selectedDay=this.fmtDayString(e),this.selectedTime=this.fmtTimeString(e)},dayOptions:function(){const e=[],o=new Date,a=[this.$t("main.targetCharge.today"),this.$t("main.targetCharge.tomorrow")];for(let d=0;d<7;d++){const c=o.toLocaleDateString("default",{month:"short",day:"numeric"}),n=a[d]||o.toLocaleDateString("default",{weekday:"long"});e.push({value:o.toISOString().split("T")[0],name:`${c} (${n})`}),o.setDate(o.getDate()+1)}return e},minTime:function(){return new Date().toISOString().split("T")[1].slice(0,-8)},setTargetTime:function(){this.$emit("target-time-updated",this.selectedTargetTime)},removeTargetTime:function(){this.$emit("target-time-removed")}}},le=e=>(w("data-v-0d69c366"),e=e(),S(),e),Xn=["data-bs-target"],ea={key:0},ta={key:1},na=["id"],aa={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable",role:"document"},oa={class:"modal-content"},ia={class:"modal-header"},sa={class:"modal-title"},ra=le(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),la={class:"modal-body"},ca={class:"form-group"},da={for:"targetTimeLabel",class:"mb-3"},ua={class:"d-flex justify-content-between",style:{"max-width":"350px"}},ha=["value"],ma={key:0,class:"text-danger mb-0"},ga={class:"small mt-3 text-muted mb-0"},pa={class:"text-evcc"},fa=le(()=>t("a",{href:"https://github.com/evcc-io/evcc/discussions/1433",target:"_blank"},"GitHub Discussions",-1)),va=v(". "),_a={class:"modal-footer d-flex justify-content-between"},ba=["disabled"];function ya(e,o,a,d,c,n){const r=g("LabelAndValue");return i(),l("div",null,[h(r,{class:"flex-grow-1",label:e.$t("main.targetCharge.title")},{default:x(()=>[t("button",{class:_(["btn btn-link p-0 value",n.targetChargeEnabled?"text-white":"text-gray"]),"data-bs-toggle":"modal","data-bs-target":`#${n.modalId}`},[n.targetChargeEnabled?(i(),l("strong",ea,s(n.targetTimeLabel()),1)):(i(),l("span",ta,s(e.$t("main.targetCharge.setTargetTime")),1))],10,Xn)]),_:1},8,["label"]),(i(),b(ie,{to:"body"},[t("div",{id:n.modalId,class:"modal fade text-dark","data-bs-backdrop":"true",tabindex:"-1",role:"dialog","aria-hidden":"true"},[t("div",aa,[t("div",oa,[t("div",ia,[t("h5",sa,s(e.$t("main.targetCharge.modalTitle")),1),ra]),t("form",{onSubmit:o[3]||(o[3]=be((...u)=>n.setTargetTime&&n.setTargetTime(...u),["prevent"]))},[t("div",la,[t("div",ca,[m(" eslint-disable vue/no-v-html "),t("label",da,s(e.$t("main.targetCharge.description",{targetSoC:a.targetSoC})),1),m(" eslint-enable vue/no-v-html "),t("div",ua,[U(t("select",{"onUpdate:modelValue":o[0]||(o[0]=u=>e.selectedDay=u),class:"form-select me-2",style:{"flex-basis":"60%"}},[(i(!0),l(C,null,I(n.dayOptions(),u=>(i(),l("option",{key:u.value,value:u.value},s(u.name),9,ha))),128))],512),[[ye,e.selectedDay]]),U(t("input",{"onUpdate:modelValue":o[1]||(o[1]=u=>e.selectedTime=u),type:"time",class:"form-control ms-2",style:{"flex-basis":"40%"},step:60*5,required:""},null,512),[[we,e.selectedTime]])])]),n.selectedTargetTimeValid?m("v-if",!0):(i(),l("p",ma,s(e.$t("main.targetCharge.targetIsInThePast")),1)),t("p",ga,[t("strong",pa,s(e.$t("main.targetCharge.experimentalLabel"))+": ",1),v(" "+s(e.$t("main.targetCharge.experimentalText"))+" ",1),fa,va])]),t("div",_a,[t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:o[2]||(o[2]=(...u)=>n.removeTargetTime&&n.removeTargetTime(...u))},s(e.$t("main.targetCharge.remove")),1),t("button",{type:"submit",class:"btn btn-primary","data-bs-dismiss":"modal",disabled:!n.selectedTargetTimeValid},s(e.$t("main.targetCharge.activate")),9,ba)])],32)])])],8,na)]))])}var ee=f(Qn,[["render",ya],["__scopeId","data-v-0d69c366"]]);const wa={name:"Vehicle",components:{VehicleSoc:Q,VehicleStatus:X,LabelAndValue:W,TargetCharge:ee},mixins:[A],props:{id:[String,Number],connected:Boolean,vehiclePresent:Boolean,vehicleSoC:Number,enabled:Boolean,charging:Boolean,minSoC:Number,vehicleRange:Number,vehicleTitle:String,targetTimeActive:Boolean,targetTimeHourSuggestion:Number,targetTime:String,targetSoC:Number,phaseAction:String,phaseRemainingInterpolated:Number,pvAction:String,pvRemainingInterpolated:Number},data(){return{displayTargetSoC:this.targetSoC}},computed:{vehicleSocProps:function(){return this.collectProps(Q)},vehicleStatus:function(){return this.collectProps(X)},targetCharge:function(){return this.collectProps(ee)}},methods:{targetSocUpdated:function(e){this.displayTargetSoC=e,this.$emit("target-soc-updated",e)},setTargetTime:function(e){this.$emit("target-time-updated",e)},removeTargetTime:function(){this.$emit("target-time-removed")}}},K=e=>(w("data-v-634f6b0a"),e=e(),S(),e),Sa={class:"vehicle p-4 pb-3"},Ca={class:"d-flex justify-content-between mb-3 align-items-center"},$a={class:"d-flex align-items-center m-0 flex-grow-1 overflow-hidden"},Ta=K(()=>t("shopicon-regular-car3",{class:"me-2 flex-shrink-0 car-icon"},null,-1)),ka={class:"flex-grow-1 text-truncate"},xa={key:0,class:"btn btn-link text-white p-0 flex-shrink-0"},Ia=K(()=>t("shopicon-filled-options",{size:"s"},null,-1)),Pa=[Ia],Da={key:1},Na={class:"d-flex flex-wrap justify-content-between"},La={key:0,class:"d-flex justify-content-start"},Aa=K(()=>t("small",null,"vor 5 Stunden",-1)),Ea=[Aa];function Va(e,o,a,d,c,n){const r=g("VehicleStatus"),u=g("VehicleSoc"),p=g("LabelAndValue"),D=g("TargetCharge");return i(),l("div",Sa,[t("div",Ca,[t("h4",$a,[Ta,t("span",ka,s(a.vehicleTitle||e.$t("main.vehicle.fallbackName")),1)]),e.$hiddenFeatures?(i(),l("button",xa,Pa)):m("v-if",!0)]),a.connected?(i(),b(r,k({key:0},n.vehicleStatus,{class:"mb-2"}),null,16)):m("v-if",!0),h(u,k(n.vehicleSocProps,{class:"mt-2 mb-4",onTargetSocUpdated:n.targetSocUpdated}),null,16,["onTargetSocUpdated"]),a.vehiclePresent?(i(),l("div",Da,[t("div",Na,[h(p,{class:"flex-grow-1 text-start flex-basis-0",label:e.$t("main.vehicle.vehicleSoC"),value:`${a.vehicleSoC||"--"} %`,extraValue:a.vehicleRange?`${a.vehicleRange} km`:null},null,8,["label","value","extraValue"]),h(p,{class:"flex-grow-1 text-end text-sm-center flex-basis-0",label:e.$t("main.vehicle.targetSoC"),value:`${c.displayTargetSoC} %`},null,8,["label","value"]),h(D,k({class:"flex-grow-1 text-sm-end target-charge flex-basis-0"},n.targetCharge,{onTargetTimeUpdated:n.setTargetTime,onTargetTimeRemoved:n.removeTargetTime}),null,16,["onTargetTimeUpdated","onTargetTimeRemoved"])]),e.$hiddenFeatures?(i(),l("div",La,Ea)):m("v-if",!0)])):m("v-if",!0)])}var F=f(wa,[["render",Va],["__scopeId","data-v-634f6b0a"]]);const Ma={name:"Phases",props:{chargeCurrent:{type:Number},chargeCurrents:{type:Object},activePhases:{type:Number},minCurrent:{type:Number},maxCurrent:{type:Number},phaseAction:{type:String},phaseRemaining:{type:Number}},computed:{phaseTimerVisible(){return this.phaseTimerActive&&!this.pvTimerActive?!0:this.phaseTimerActive&&this.pvTimerActive?this.phaseRemainingInterpolated<this.pvRemainingInterpolated:!1},pvTimerVisible(){return this.pvTimerActive&&!this.phaseTimerActive?!0:this.pvTimerActive&&this.phaseTimerActive?this.pvRemainingInterpolated<this.phaseRemainingInterpolated:!1}},methods:{inactive(e){return e>this.activePhases},targetWidth(){let e=Math.min(Math.max(this.minCurrent,this.chargeCurrent),this.maxCurrent);return 100/this.maxCurrent*e},realWidth(e){if(this.chargeCurrents){const o=this.chargeCurrents[e-1]||0;return 100/this.maxCurrent*o}return this.targetWidth()}}};function Ra(e,o,a,d,c,n){return i(),l("div",{class:_(["phases d-flex flex-column justify-content-between",`active-phases-${a.activePhases}`])},[(i(),l(C,null,I([1,2,3],r=>t("div",{key:r,class:_(["phase",{inactive:n.inactive(r)}])},[t("div",{class:"target",style:y({width:`${n.targetWidth()}%`})},null,4),t("div",{class:"real",style:y({width:`${n.realWidth(r)}%`})},null,4)],2)),64))],2)}var te=f(Ma,[["render",Ra],["__scopeId","data-v-58ab894e"]]);const Ba={name:"Loadpoint",components:{Mode:An,Vehicle:F,Phases:te,LabelAndValue:W},mixins:[P,A],props:{id:Number,single:Boolean,title:String,mode:String,targetSoC:Number,remoteDisabled:Boolean,remoteDisabledSource:String,chargeDuration:Number,charging:Boolean,connected:Boolean,enabled:Boolean,vehicleTitle:String,vehicleSoC:Number,vehiclePresent:Boolean,vehicleRange:Number,minSoC:Number,targetTime:String,targetTimeActive:Boolean,targetTimeHourSuggestion:Number,vehicleProviderLoggedIn:Boolean,vehicleProviderLoginPath:String,vehicleProviderLogoutPath:String,chargePower:Number,chargedEnergy:Number,climater:String,chargeRemainingDuration:Number,phases:Number,minCurrent:Number,maxCurrent:Number,activePhases:Number,chargeCurrent:Number,vehicleCapacity:Number,connectedDuration:Number,chargeCurrents:Array,chargeConfigured:Boolean,chargeRemainingEnergy:Number,phaseAction:String,phaseRemaining:Number,pvRemaining:Number,pvAction:String},data(){return{tickerHandler:null,phaseRemainingInterpolated:this.phaseRemaining,pvRemainingInterpolated:this.pvRemaining,chargeDurationInterpolated:this.chargeDuration,chargeRemainingDurationInterpolated:this.chargeRemainingDuration}},computed:{phasesProps:function(){return this.collectProps(te)},vehicle:function(){return this.collectProps(F)}},watch:{phaseRemaining(){this.phaseRemainingInterpolated=this.phaseRemaining},pvRemaining(){this.pvRemainingInterpolated=this.pvRemaining},chargeDuration(){this.chargeDurationInterpolated=this.chargeDuration},chargeRemainingDuration(){this.chargeRemainingDurationInterpolated=this.chargeRemainingDuration}},mounted(){this.tickerHandler=setInterval(this.tick,1e3)},unmounted(){clearInterval(this.tickerHandler)},methods:{tick(){this.phaseRemainingInterpolated>0&&this.phaseRemainingInterpolated--,this.pvRemainingInterpolated>0&&this.pvRemainingInterpolated--,this.chargeDurationInterpolated>0&&this.charging&&this.chargeDurationInterpolated++,this.chargeRemainingDurationInterpolated>0&&this.charging&&this.chargeRemainingDurationInterpolated--},apiPath:function(e){return"loadpoints/"+this.id+"/"+e},setTargetMode:function(e){N.post(this.apiPath("mode")+"/"+e)},setTargetSoC:function(e){N.post(this.apiPath("targetsoc")+"/"+e)},setTargetTime:function(e){const o=`${this.fmtDayString(e)}T${this.fmtTimeString(e)}:00`;N.post(this.apiPath("targetcharge")+"/"+this.targetSoC+"/"+o)},removeTargetTime:function(){N.delete(this.apiPath("targetcharge"))}}},Ua=e=>(w("data-v-857c6a0e"),e=e(),S(),e),za={class:"loadpoint bg-white p-4"},ja={class:"d-flex justify-content-between align-items-center mb-3"},Fa={class:"mb-3 me-2 text-truncate"},Wa={key:0,class:"mb-3 btn btn-link text-dark p-0 flex-shrink-0"},Ka=Ua(()=>t("shopicon-filled-options",{size:"s"},null,-1)),Ha=[Ka],Ga={class:"details d-flex align-items-start mb-3"},Oa={class:"d-flex align-items-center"};function Za(e,o,a,d,c,n){const r=g("Mode"),u=g("LabelAndValue"),p=g("Phases"),D=g("Vehicle");return i(),l("div",za,[t("div",ja,[t("h3",Fa,s(a.title||e.$t("main.loadpoint.fallbackName")),1),h(r,{class:"mb-3",mode:a.mode,onUpdated:n.setTargetMode},null,8,["mode","onUpdated"]),e.$hiddenFeatures?(i(),l("button",Wa,Ha)):m("v-if",!0)]),a.remoteDisabled?(i(),l("div",{key:0,class:_(["alert alert-warning my-4 py-2",`${a.remoteDisabled==="hard"?"alert-danger":"alert-warning"}`]),role:"alert"},s(e.$t(a.remoteDisabled==="hard"?"main.loadpoint.remoteDisabledHard":"main.loadpoint.remoteDisabledSoft",{source:a.remoteDisabledSource})),3)):m("v-if",!0),t("div",Ga,[t("div",Oa,[t("div",null,[h(u,{label:e.$t("main.loadpoint.power"),value:e.fmtKw(a.chargePower),class:"mb-2"},null,8,["label","value"]),h(p,k(n.phasesProps,{class:["opacity-transiton",`opacity-${a.charging?"100":"0"}`]}),null,16,["class"])]),t("shopicon-regular-lightning",{class:_(["text-evcc opacity-transiton",`opacity-${a.charging?"100":"0"}`]),size:"m"},null,2)]),h(u,{label:e.$t("main.loadpoint.charged"),value:e.fmtKw(a.chargedEnergy)},null,8,["label","value"]),c.chargeRemainingDurationInterpolated?(i(),b(u,{key:0,label:e.$t("main.loadpoint.remaining"),value:`
					${e.fmtShortDuration(c.chargeRemainingDurationInterpolated)}
					${e.fmtShortDurationUnit(c.chargeRemainingDurationInterpolated,!0)}`},null,8,["label","value"])):(i(),b(u,{key:1,label:e.$t("main.loadpoint.duration"),value:`
					${e.fmtShortDuration(c.chargeDurationInterpolated)}
					${e.fmtShortDurationUnit(c.chargeDurationInterpolated)}`},null,8,["label","value"]))]),h(D,k(n.vehicle,{onTargetSocUpdated:n.setTargetSoC,onTargetTimeUpdated:n.setTargetTime,onTargetTimeRemoved:n.removeTargetTime}),null,16,["onTargetSocUpdated","onTargetTimeUpdated","onTargetTimeRemoved"])])}var qa=f(Ba,[["render",Za],["__scopeId","data-v-857c6a0e"]]);const Ya={name:"Site",components:{Loadpoint:qa},mixins:[A],props:{loadpoints:Array},data(){return{selectedIndex:0,snapTimeout:null}},mounted(){this.$refs.carousel.addEventListener("scroll",this.handleCarouselScroll,!1)},unmounted(){this.$refs.carousel.removeEventListener("scroll",this.handleCarouselScroll)},methods:{handleCarouselScroll(){const{scrollLeft:e}=this.$refs.carousel,{offsetWidth:o}=this.$refs.carousel.children[0];this.selectedIndex=Math.round((e-7.5)/o)},selected(e){return this.selectedIndex===e},scrollTo(e){if(this.selectedIndex===e)return;this.selectedIndex=e;const o=this.$refs.carousel,a=o.children[0].offsetWidth;o.style.scrollSnapType="none",o.scrollTo({top:0,left:7.5+a*e,behavior:"smooth"}),clearTimeout(this.snapTimeout),this.snapTimeout=setTimeout(()=>{this.$refs.carousel.style.scrollSnapType="x mandatory"},1e3)}}},Ja=e=>(w("data-v-22b9956c"),e=e(),S(),e),Qa={class:"container px-4 mb-3 mb-sm-4"},Xa={class:"mb-3"},eo={class:"container container--loadpoint px-0"},to={ref:"carousel",class:"carousel d-lg-flex flex-wrap"},no={key:0,class:"d-flex d-lg-none justify-content-center"},ao=["onClick"],oo=Ja(()=>t("shopicon-filled-circle",{class:"indicator-icon"},null,-1)),io=[oo];function so(e,o,a,d,c,n){const r=g("Loadpoint");return i(),l("div",null,[t("div",Qa,[t("h2",Xa,s(e.$t("main.loadpoints")),1)]),t("div",eo,[t("div",to,[(i(!0),l(C,null,I(a.loadpoints,(u,p)=>(i(),l("div",{key:p,class:"flex-grow-1 mb-3 m-lg-0 p-lg-0"},[h(r,k(u,{id:p,class:["h-100",{"loadpoint-unselected":!n.selected(p)}],onClick:D=>n.scrollTo(p)}),null,16,["id","class","onClick"])]))),128))],512),a.loadpoints.length>1?(i(),l("div",no,[(i(!0),l(C,null,I(a.loadpoints,(u,p)=>(i(),l("button",{key:p,class:_(["btn btn-sm btn-link p-0 mx-1 indicator d-flex justify-content-center align-items-center text-white",{"indicator--selected":n.selected(p)}]),onClick:D=>n.scrollTo(p)},io,10,ao))),128))])):m("v-if",!0)])])}var ro=f(Ya,[["render",so],["__scopeId","data-v-22b9956c"]]);const lo={name:"Vehicles",components:{Vehicle:F},mixins:[A],data(){return{refreshing:!1,vehicles:[{vehiclePresent:!0,vehicleTitle:"Ford Mustang Mach-E",vehicleSoC:46,vehicleRange:182,targetSoC:100},{vehiclePresent:!0,vehicleTitle:"Renault Twingo Electric",vehicleSoC:77,vehicleRange:98,targetSoC:90},{vehiclePresent:!0,vehicleTitle:"Blauer VW ID.4",vehicleSoC:16,vehicleRange:52,minSoC:35,targetSoC:60}]}},methods:{refresh(){this.refreshing=!0,window.setTimeout(()=>{this.refreshing=!1},5e3)}}},co=e=>(w("data-v-005ca608"),e=e(),S(),e),uo={class:"container px-4 mb-3 mb-sm-4 d-flex justify-content-start align-items-center"},ho={class:"m-0"},mo=["disabled"],go=co(()=>t("shopicon-regular-refresh",{class:"refresh-icon"},null,-1)),po=[go];function fo(e,o,a,d,c,n){const r=g("Vehicle");return i(),l("div",null,[t("div",uo,[t("h2",ho,s(e.$t("main.vehicles")),1),t("button",{class:_(["btn btn-link d-flex text-white p-2 ms-1 refresh",{"refresh--in-progress":c.refreshing}]),disabled:c.refreshing,onClick:o[0]||(o[0]=(...u)=>n.refresh&&n.refresh(...u))},po,10,mo)]),t("div",{class:_(["container vehicles px-0 mb-5",`vehicles-${c.vehicles.length}`])},[(i(!0),l(C,null,I(c.vehicles,(u,p)=>(i(),b(r,k(u,{id:`vehicle_${p}`,key:p,class:"vehicle"}),null,16,["id"]))),128))],2)])}var vo=f(lo,[["render",fo],["__scopeId","data-v-005ca608"]]);const _o={name:"Logo"},bo={viewBox:"0 0 122 35",xmlns:"http://www.w3.org/2000/svg","fill-rule":"evenodd","clip-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2"},yo=t("path",{d:"M13.082 29.071a12.384 12.384 0 01-9-3.42 12.192 12.192 0 01-3.54-9.12v-.64a15.394 15.394 0 011.47-6.83 10.825 10.825 0 014.17-4.64 11.64 11.64 0 016.15-1.63 10.45 10.45 0 018.21 3.26c2 2.194 3 5.297 3 9.31v2.76H7.382a6.348 6.348 0 002 4 5.997 5.997 0 004.16 1.49 7.305 7.305 0 006.1-2.84l3.31 3.73a10 10 0 01-4.13 3.39 13.309 13.309 0 01-5.74 1.18zm-.77-20.84a4.216 4.216 0 00-3.26 1.37 7.141 7.141 0 00-1.6 3.91h9.39v-.55a5.005 5.005 0 00-1.22-3.49 4.304 4.304 0 00-3.31-1.24zM36.452 20.331l4.7-17.09h7l-8.48 25.36h-6.44l-8.52-25.36h7l4.74 17.09zM85.542 23.611a4.444 4.444 0 003-1 3.638 3.638 0 001.22-2.75h6.32a8.668 8.668 0 01-1.4 4.73 9.145 9.145 0 01-3.79 3.3 11.736 11.736 0 01-5.29 1.19 10.912 10.912 0 01-8.54-3.46c-2.087-2.3-3.13-5.483-3.13-9.55v-.45c0-3.9 1.033-7.016 3.1-9.35a10.868 10.868 0 018.51-3.5c2.791-.134 5.524.84 7.6 2.71a9.626 9.626 0 012.9 7.21h-6.3a4.663 4.663 0 00-1.2-3.22 4.005 4.005 0 00-3.08-1.24 4.068 4.068 0 00-3.56 1.73c-.8 1.15-1.2 3-1.2 5.6v.7c0 2.61.39 4.49 1.19 5.63a4.092 4.092 0 003.65 1.72zM110.422 23.611a4.454 4.454 0 003-1 3.63 3.63 0 001.21-2.75h6.33a8.668 8.668 0 01-1.4 4.73 9.143 9.143 0 01-3.73 3.3 11.76 11.76 0 01-5.29 1.18 10.912 10.912 0 01-8.54-3.46c-2.087-2.3-3.13-5.483-3.13-9.55v-.45c0-3.9 1.033-7.016 3.1-9.35a10.85 10.85 0 018.57-3.49 10.575 10.575 0 017.6 2.71 9.598 9.598 0 012.91 7.21h-6.33a4.651 4.651 0 00-1.21-3.22 4.492 4.492 0 00-6.64.49c-.8 1.15-1.21 3-1.21 5.6v.7c0 2.607.4 4.484 1.2 5.63a4.09 4.09 0 003.56 1.72z",fill:"#fff","fill-rule":"nonzero"},null,-1),wo=t("path",{d:"M58.462.751h9.22l-6.14 12.3h6.15l-11.53 21.51 2.3-15.36h-7.68l7.68-18.45z",fill:"#0fdd42","fill-rule":"nonzero"},null,-1),So=t("path",{fill:"none",d:"M-24.458-22.109h170v76h-170z"},null,-1),Co=[yo,wo,So];function $o(e,o,a,d,c,n){return i(),l("svg",bo,Co)}var To=f(_o,[["render",$o]]);const ko={name:"Version",components:{Logo:To},props:{installed:String,available:String,releaseNotes:String,commit:String,hasUpdater:Boolean,uploadMessage:String,uploadProgress:Number},data:function(){return{updateStarted:!1,updateStatus:""}},computed:{githubHashUrl:function(){return`https://github.com/evcc-io/evcc/commit/${this.commit}`},newVersionAvailable:function(){return this.available&&this.installed!="[[.Version]]"&&this.installed!="0.0.1-alpha"&&this.available!=this.installed}},methods:{update:async function(){try{await N.post("update"),this.updateStatus=this.$t("footer.version.modalUpdateStatusStart"),this.updateStarted=!0}catch(e){this.updateStatus=this.$t("footer.version.modalUpdateStatusStart")+e}},releaseNotesUrl:function(e){return`https://github.com/evcc-io/evcc/releases/tag/${e}`}}},B=e=>(w("data-v-2a59bbb2"),e=e(),S(),e),xo=["href"],Io=B(()=>t("shopicon-regular-moonstars",{class:"me-2 text-gray-medium"},null,-1)),Po={class:"ms-2 text-gray-medium"},Do={key:1,href:"#","data-bs-toggle":"modal","data-bs-target":"#updateModal",class:"btn btn-link ps-0 text-decoration-none text-white text-nowrap d-flex align-items-end"},No=B(()=>t("shopicon-regular-gift",{class:"me-2 text-evcc"},null,-1)),Lo={class:"ms-2 d-none d-xs-block d-sm-none text-decoration-underline"},Ao={class:"ms-2 d-none d-sm-block text-gray-medium text-decoration-underline"},Eo=["href"],Vo={id:"updateModal",class:"modal fade text-dark",tabindex:"-1",role:"dialog","aria-hidden":"true"},Mo={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable",role:"document"},Ro={class:"modal-content"},Bo={class:"modal-header"},Uo={class:"modal-title"},zo=B(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),jo={class:"modal-body"},Fo={key:0},Wo={class:"progress my-3"},Ko={key:1},Ho=["innerHTML"],Go=["href"],Oo=v(". "),Zo={class:"modal-footer d-flex justify-content-between"},qo=["disabled"],Yo=["disabled"],Jo={key:0},Qo=B(()=>t("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)),Xo={key:1},ei=["href"];function ti(e,o,a,d,c,n){const r=g("Logo");return i(),l("div",null,[a.commit?(i(),l("a",{key:0,href:n.githubHashUrl,target:"_blank",class:"btn btn-link ps-0 text-decoration-none text-white text-nowrap d-flex align-items-end"},[Io,v(" v"+s(a.installed)+" ",1),t("span",Po,"["+s(a.commit)+"]",1)],8,xo)):n.newVersionAvailable?(i(),l("button",Do,[No,v(" v"+s(a.installed)+" ",1),t("span",Lo,s(e.$t("footer.version.availableShort")),1),t("span",Ao,s(e.$t("footer.version.availableLong")),1)])):(i(),l("a",{key:2,href:n.releaseNotesUrl(a.installed),target:"_blank",class:"btn btn-link text-white ps-0 text-decoration-none text-nowrap d-flex align-items-end"},[h(r,{class:"logo me-2"}),v(" v"+s(a.installed),1)],8,Eo)),t("div",Vo,[t("div",Mo,[t("div",Ro,[t("div",Bo,[t("h5",Uo,s(e.$t("footer.version.modalTitle")),1),zo]),t("div",jo,[e.updateStarted?(i(),l("div",Fo,[t("p",null,s(e.$t("footer.version.modalUpdateStarted")),1),t("div",Wo,[t("div",{class:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:y({width:a.uploadProgress+"%"})},null,4)]),t("p",null,s(e.updateStatus)+s(a.uploadMessage),1)])):(i(),l("div",Ko,[t("p",null,[t("small",null,s(e.$t("footer.version.modalInstalledVersion"))+": "+s(a.installed),1)]),m(" eslint-disable vue/no-v-html "),a.releaseNotes?(i(),l("div",{key:0,innerHTML:a.releaseNotes},null,8,Ho)):(i(),l(C,{key:1},[m(" eslint-enable vue/no-v-html "),t("p",null,[v(s(e.$t("footer.version.modalNoReleaseNotes"))+" ",1),t("a",{href:n.releaseNotesUrl(a.available)},"GitHub",8,Go),Oo])],2112))]))]),t("div",Zo,[t("button",{type:"button",class:"btn btn-outline-secondary",disabled:e.updateStarted,"data-bs-dismiss":"modal"},s(e.$t("footer.version.modalCancel")),9,qo),t("div",null,[a.hasUpdater?(i(),l("button",{key:0,type:"button",class:"btn btn-primary",disabled:e.updateStarted,onClick:o[0]||(o[0]=(...u)=>n.update&&n.update(...u))},[e.updateStarted?(i(),l("span",Jo,[Qo,v(" "+s(e.$t("footer.version.modalUpdate")),1)])):(i(),l("span",Xo,s(e.$t("footer.version.modalUpdateNow")),1))],8,Yo)):(i(),l("a",{key:1,href:n.releaseNotesUrl(a.available),class:"btn btn-primary"},s(e.$t("footer.version.modalDownload")),9,ei))])])])])])])}var ni=f(ko,[["render",ti],["__scopeId","data-v-2a59bbb2"]]);const ai={name:"Sponsor",props:{sponsor:String},methods:{surprise:function(){const e=this.$refs.confetti,o=45+Math.random()*90,a=0,{top:d,height:c,left:n,width:r}=e.getBoundingClientRect(),u=(n+r/2)/window.innerWidth,p=(d+c/2)/window.innerHeight;Se({origin:{x:u,y:p},angle:o,particleCount:75+Math.random()*50,spread:50+Math.random()*50,drift:a,scalar:1.3,zIndex:1056,colors:["#0d6efd","#0fdd42","#408458","#4923BA","#5BC8EC","#C54482","#CC444A","#EE8437","#F7C144","#FFFD54"]})}}},oi=e=>(w("data-v-0f5f312e"),e=e(),S(),e),ii={key:0},si={class:"mb-3"},ri={class:"d-flex justify-content-center align-items-center flex-column"},li=oi(()=>t("shopicon-regular-heart",{class:"me-1 d-inline-block"},null,-1)),ci={href:"https://evcc.io/sticker",target:"_blank",class:"small text-muted"};function di(e,o,a,d,c,n){return a.sponsor,i(),l("div",ii,[t("p",si,s(e.$t("footer.sponsor.thanks",{sponsor:a.sponsor})),1),t("div",ri,[t("button",{ref:"confetti",class:"btn btn btn-outline-primary mb-2 confetti-button bg-evcc w-75 rounded",onClick:o[0]||(o[0]=(...r)=>n.surprise&&n.surprise(...r))},[li,v(" "+s(e.$t("footer.sponsor.confetti")),1)],512),t("a",ci,s(e.$t("footer.sponsor.sticker")),1)])])}var ui=f(ai,[["render",di],["__scopeId","data-v-0f5f312e"]]);const hi={name:"Savings",components:{Sponsor:ui},mixins:[P],props:{selfConsumptionPercent:Number,since:{type:Number,default:0},sponsor:String,amount:{type:Number,default:0},effectivePrice:{type:Number,default:0},totalCharged:{type:Number,default:0},gridCharged:{type:Number,default:0},selfConsumptionCharged:{type:Number,default:0},gridPrice:{type:Number},feedInPrice:{type:Number},currency:String},computed:{percent(){return Math.round(this.selfConsumptionPercent)||0},noData(){return this.totalCharged===0}},methods:{secondsSinceStart(){return this.since*1e3-Date.now()}}},E=e=>(w("data-v-cf37ccf0"),e=e(),S(),e),mi={class:"btn btn-link pe-0 text-decoration-none text-white text-nowrap d-flex align-items-end","data-bs-toggle":"modal","data-bs-target":"#savingsModal"},gi={class:"d-inline d-sm-none"},pi={class:"d-none d-sm-inline"},fi=E(()=>t("shopicon-regular-sun",{class:"ms-2 text-evcc"},null,-1)),vi={id:"savingsModal",ref:"modal",class:"modal fade text-dark","data-bs-backdrop":"true",tabindex:"-1",role:"dialog","aria-hidden":"true"},_i={class:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",role:"document"},bi={class:"modal-content"},yi={class:"modal-header"},wi={class:"modal-title"},Si={class:"d-block d-sm-none"},Ci={class:"d-none d-sm-block"},$i=E(()=>t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1)),Ti={class:"modal-body py-4"},ki={class:"chart-container mb-3"},xi={class:"chart-legend d-flex flex-wrap justify-content-between mb-1"},Ii={class:"chart d-flex justify-content-stretch mb-1 rounded overflow-hidden"},Pi={class:"text-truncate"},Di={class:"text-truncate"},Ni={key:2,class:"chart-item chart-item--no-data d-flex justify-content-center align-items-center text-white w-100"},Li={class:"mb-3"},Ai=E(()=>t("br",null,null,-1)),Ei={class:"small text-muted mb-3"},Vi={href:"https://docs.evcc.io/docs/guides/setup/#ersparnisberechnung",target:"_blank",class:"small"},Mi=v(": "),Ri={class:"text-nowrap"},Bi=v(", "),Ui={class:"text-nowrap"},zi=E(()=>t("br",null,null,-1)),ji=E(()=>t("hr",{class:"mb-4"},null,-1)),Fi={class:"small text-muted mb-0"},Wi={class:"text-evcc"},Ki=E(()=>t("a",{href:"https://github.com/evcc-io/evcc/discussions/2104",target:"_blank"},"GitHub Discussions",-1)),Hi=v(". ");function Gi(e,o,a,d,c,n){const r=g("Sponsor");return i(),l("div",null,[t("button",mi,[t("span",gi,s(e.$t("footer.savings.footerShort",{percent:n.percent})),1),t("span",pi,s(e.$t("footer.savings.footerLong",{percent:n.percent})),1),fi]),(i(),b(ie,{to:"body"},[t("div",vi,[t("div",_i,[t("div",bi,[t("div",yi,[t("h5",wi,[t("span",Si,s(e.$t("footer.savings.modalTitleShort",{percent:n.percent,total:e.fmtKw(a.totalCharged*1e3,!0,!1)})),1),t("span",Ci,s(e.$t("footer.savings.modalTitleLong",{percent:n.percent,total:e.fmtKw(a.totalCharged*1e3,!0,!1)})),1)]),$i]),t("div",Ti,[t("div",ki,[t("div",xi,[t("div",{class:_(["text-nowrap",{"text-gray-medium":n.noData}])},[t("shopicon-filled-square",{class:_(["text-evcc d-inline-block",{"text-gray-medium":n.noData}])},null,2),v(" "+s(e.$t("footer.savings.modalChartSelf",{self:e.fmtKw(a.selfConsumptionCharged*1e3,!0,!1)})),1)],2),t("div",{class:_(["text-nowrap",{"text-gray-medium":n.noData}])},[v(s(e.$t("footer.savings.modalChartGrid",{grid:e.fmtKw(a.gridCharged*1e3,!0,!1)}))+" ",1),t("shopicon-filled-square",{class:_(["text-grid d-inline-block",{"text-gray-medium":n.noData}])},null,2)],2)]),t("div",Ii,[n.noData?m("v-if",!0):(i(),l("div",{key:0,class:"chart-item chart-item--self d-flex justify-content-center align-items-center text-white flex-shrink-1",style:y({width:`${n.percent}%`})},[t("span",Pi,s(n.percent)+"% ",1)],4)),n.noData?m("v-if",!0):(i(),l("div",{key:1,class:"chart-item chart-item--grid d-flex justify-content-center align-items-center text-white flex-shrink-1",style:y({width:`${100-n.percent}%`})},[t("span",Di,s(100-n.percent)+"% ",1)],4)),n.noData?(i(),l("div",Ni,[t("span",null,s(e.$t("footer.savings.modalNoData")),1)])):m("v-if",!0)])]),t("p",Li,[v(s(e.$t("footer.savings.modalSavingsPrice"))+": ",1),t("strong",null,s(e.fmtPricePerKWh(a.effectivePrice,a.currency)),1),Ai,v(" "+s(e.$t("footer.savings.modalSavingsTotal"))+": ",1),t("strong",null,s(e.fmtMoney(a.amount,a.currency)),1)]),t("p",Ei,[t("a",Vi,s(e.$t("footer.savings.modalExplaination")),1),Mi,t("span",Ri,s(e.$t("footer.savings.modalExplainationGrid",{gridPrice:e.fmtPricePerKWh(a.gridPrice,a.currency)})),1),Bi,t("span",Ui,s(e.$t("footer.savings.modalExplainationFeedIn",{feedInPrice:e.fmtPricePerKWh(a.feedInPrice,a.currency)})),1),zi,v(" "+s(e.$t("footer.savings.modalServerStart",{since:e.fmtTimeAgo(n.secondsSinceStart())})),1)]),ji,h(r,{sponsor:a.sponsor,class:"mb-4"},null,8,["sponsor"]),t("p",Fi,[t("strong",Wi,s(e.$t("footer.savings.experimentalLabel"))+": ",1),v(" "+s(e.$t("footer.savings.experimentalText"))+" ",1),Ki,Hi])])])])],512)]))])}var Oi=f(hi,[["render",Gi],["__scopeId","data-v-cf37ccf0"]]);const Zi={name:"Footer",components:{Version:ni,Savings:Oi},props:{version:Object,sponsor:String,savings:Object},methods:{toggleHiddenFeatures(){const e=`\u{1F9EA} Experimentelle UI-Elemente ${this.$hiddenFeatures?"deaktivieren":"aktivieren"}`;window.confirm(e)&&(window.localStorage.hidden_features=!this.$hiddenFeatures,window.location.reload())}}},qi=e=>(w("data-v-39d3711c"),e=e(),S(),e),Yi={class:"footer"},Ji={class:"container py-3"},Qi={class:"d-flex justify-content-between"},Xi=qi(()=>t("shopicon-filled-testtube",{size:"s"},null,-1)),es=[Xi];function ts(e,o,a,d,c,n){const r=g("Version"),u=g("Savings");return i(),l("footer",Yi,[t("div",Ji,[t("div",Qi,[h(r,$(T(a.version)),null,16),t("button",{class:_(["btn btn-link p-0 flex-shrink-0",{"text-evcc":e.$hiddenFeatures,"text-muted":!e.$hiddenFeatures}]),onClick:o[0]||(o[0]=(...p)=>n.toggleHiddenFeatures&&n.toggleHiddenFeatures(...p))},es,2),m(" Please don't mess with the sponsor status. You risk loosing your mojo. "),h(u,k(a.savings,{sponsor:a.sponsor}),null,16,["sponsor"])])])])}var ns=f(Zi,[["render",ts],["__scopeId","data-v-39d3711c"]]);const as={name:"Site",components:{Loadpoints:ro,Energyflow:J,Footer:ns,Notifications:wt,TopNavigation:it,Vehicles:vo},mixins:[P,A],props:{loadpoints:Array,notifications:Array,gridConfigured:Boolean,gridPower:Number,homePower:Number,pvConfigured:Boolean,pvPower:Number,batteryConfigured:Boolean,batteryPower:Number,batterySoC:Number,gridCurrents:Array,prioritySoC:Number,siteTitle:String,auth:Object,currency:String,savingsAmount:Number,savingsEffectivePrice:Number,savingsGridCharged:Number,savingsSelfConsumptionCharged:Number,savingsSelfConsumptionPercent:Number,savingsSince:Number,savingsTotalCharged:Number,tariffFeedIn:Number,tariffGrid:Number},data:function(){return{detailsVisible:!1,detailsHeight:0,availableVersion:null,releaseNotes:null,hasUpdater:null,uploadMessage:null,uploadProgress:null,sponsor:null}},computed:{energyflow:function(){return this.collectProps(J)},activeLoadpointsCount:function(){return this.loadpoints.filter(e=>e.chargePower>0).length},loadpointsPower:function(){return this.loadpoints.reduce((e,o)=>(e+=o.chargePower||0,e),0)},topNavigation:function(){return{vehicleLogins:this.auth?this.auth.vehicles:{}}},footer:function(){return{version:{installed:window.evcc.version,available:this.availableVersion,releaseNotes:this.releaseNotes,hasUpdater:this.hasUpdater,uploadMessage:this.uploadMessage,uploadProgress:this.uploadProgress},sponsor:this.sponsor,savings:{since:this.savingsSince,totalCharged:this.savingsTotalCharged,gridCharged:this.savingsGridCharged,selfConsumptionCharged:this.savingsSelfConsumptionCharged,amount:this.savingsAmount,effectivePrice:this.savingsEffectivePrice,selfConsumptionPercent:this.savingsSelfConsumptionPercent,gridPrice:this.tariffGrid,feedInPrice:this.tariffFeedIn,currency:this.currency}}}},mounted(){this.updateDetailHeight(),window.addEventListener("resize",this.updateDetailHeight)},unmounted(){window.removeEventListener("resize",this.updateDetailHeight)},methods:{updateDetailHeight:function(){this.detailsHeight=this.$el.querySelector("[data-collapsible-details]").offsetHeight},toggleDetails(){this.updateDetailHeight(),this.detailsVisible=!this.detailsVisible}}},os=e=>(w("data-v-6e6f29f0"),e=e(),S(),e),is={class:"d-flex flex-column top-area"},ss={class:"container px-4"},rs={class:"d-flex justify-content-between align-items-center"},ls={class:"d-block my-4"},cs={class:"py-1 d-flex"},ds=os(()=>t("hr",{class:"toggle-handle-icon bg-white m-0 p-0"},null,-1)),us=[ds];function hs(e,o,a,d,c,n){const r=g("Notifications"),u=g("TopNavigation"),p=g("Energyflow"),D=g("Loadpoints"),ce=g("Vehicles"),de=g("Footer");return i(),l("div",is,[t("div",ss,[t("div",rs,[t("h1",ls,s(a.siteTitle||"evcc"),1),t("div",cs,[h(r,{notifications:a.notifications,class:"me-2"},null,8,["notifications"]),h(u,$(T(n.topNavigation)),null,16)])]),h(p,k(n.energyflow,{onToggleDetails:n.toggleDetails}),null,16,["onToggleDetails"])]),t("div",{class:"d-flex flex-column content-area",style:y({transform:`translateY(${e.detailsVisible?e.detailsHeight:3}px)`,"padding-bottom":`${e.detailsVisible?e.detailsHeight:3}px`})},[t("div",{class:"toggle-handle py-3 d-flex justify-content-center",onClick:o[0]||(o[0]=(...ue)=>n.toggleDetails&&n.toggleDetails(...ue))},us),h(D,{loadpoints:a.loadpoints,class:"mb-5"},null,8,["loadpoints"]),e.$hiddenFeatures?(i(),b(ce,{key:0})):m("v-if",!0),h(de,$(T(n.footer)),null,16)],4)])}var ms=f(as,[["render",hs],["__scopeId","data-v-6e6f29f0"]]);const gs={name:"Main",components:{Site:ms},props:{notifications:Array},data:function(){return z},computed:{configured:function(){const e=window.evcc.configured;return e==window.evcc.configured||!isNaN(parseInt(e))&&parseInt(e)>0}}},ps={key:1,class:"container"},fs=Ce(`<div class="row py-5"><div class="col12"><p class="h1 pt-5 pb-2 border-bottom">Willkommen bei evcc</p><p class="lead pt-2"><b>evcc</b> ist dient zur flexiblen Ladesteuerung von Elektrofahrzeugen. </p><p class="pt-2"> Es sieht aus, als w\xE4re Dein <b>evcc</b> noch nicht konfiguriert. Um <b>evcc</b> zu konfigurieren sind die folgenden Schritte notwendig: </p><ol class="pt-2"><li> Erzeugen einer Konfigurationsdatei mit Namen <code>evcc.yaml</code>. Die Standardkonfiguration <code>evcc.dist.yaml</code> kann daf\xFCr als Vorlage dienen (<a href="https://github.com/evcc-io/evcc/blob/master/evcc.dist.yaml">Download</a>). </li><li>Konfiguration der Wallbox als <code>chargers</code>.</li><li> Konfiguration des EVU Z\xE4hlers und evtl. weiterer Z\xE4hler unter <code>meters</code>. </li><li> Konfiguration des Netzanschlusses unter <code>site</code>. In einer Site wird der Netzanschluss mit dem konfigurierten EVU Z\xE4hler (<code>meter</code>) verbunden. </li><li> Konfiguration eines Ladepunktes unter <code>loadpoints</code>. In einem Ladepunkt wird die konfigurierte Wallbox (<code>charger</code>) mit dem Ladepunkt verbunden. </li><li> Start von <b>evcc</b> mit der neu erstellten Konfiguration: <code>evcc -c evcc.yaml</code></li></ol><p>Minimale Beispielkonfiguration f\xFCr <b>evcc</b>:</p><p><code><pre class="mx-3">                uri: localhost:7070 # Adresse f\xFCr UI
                interval: 10s # Regelintervall
                meters:
                - name: evu-z\xE4hler
                type: ... # Detailkonfiguration des EVU Z\xE4hlers
                - name: ladez\xE4hler
                type: ... # Detailkonfiguration des Ladez\xE4hlers (optional)
                chargers:
                - name: wallbox
                type: ... # Detailkonfiguration der Wallbox
                site:
                  title: Home
                  meters:
                  grid: evu-z\xE4hler # EVU Z\xE4hler
                loadpoints:
                - title: Ladepunkt # ui display name
                  charger: wallbox # charger
                  meters:
                    charge: ladez\xE4hler # Ladez\xE4hlers (optional)
              </pre></code></p><p> Viel Spass mit <b>evcc</b>! Bei Problemen kannst Du uns auf <a href="https://github.com/evcc-io/evcc/issues">GitHub</a> erreichen. </p></div></div>`,1),vs=[fs];function _s(e,o,a,d,c,n){const r=g("Site");return i(),l("div",null,[n.configured?(i(),b(r,k({key:0,notifications:a.notifications},e.state),null,16,["notifications"])):(i(),l("div",ps,vs))])}var bs=f(gs,[["render",_s]]),ys=$e({history:Te(),routes:[{path:"/",component:bs,props:!0}]}),ws={header:{docs:"Dokumentation",blog:"Blog",github:"GitHub",login:"Fahrzeug Logins",about:"\xDCber evcc"},footer:{version:{availableShort:"Update",availableLong:"Update verf\xFCgbar",modalTitle:"Update verf\xFCgbar",modalUpdateStarted:"Nach der Aktualisierung wird evcc neu gestartet.",modalInstalledVersion:"Aktuell installierte Version",modalNoReleaseNotes:"Keine Releasenotes verf\xFCgbar. Mehr Informationen zur neuen Version findest du hier:",modalCancel:"Abbrechen",modalUpdate:"Aktualisieren",modalUpdateNow:"Jetzt aktualisieren",modalDownload:"Download",modalUpdateStatusStart:"Aktualisierung gestartet: ",modalUpdateStatusFailed:"Aktualisierung nicht m\xF6glich: "},savings:{footerShort:"{percent}% Sonne",footerLong:"{percent}% Sonnenenergie",modalTitleShort:"{total} kWh geladen \xB7 {percent}% Sonne",modalTitleLong:"{total} kWh geladen \xB7 {percent}% Sonnenenergie",modalChartGrid:"Netz {grid} kWh",modalChartSelf:"Sonne {self} kWh",modalSavingsPrice:"Effektiver Energiepreis",modalSavingsTotal:"Ersparnis gegen\xFCber Netzbezug",modalExplaination:"Berechnung",modalExplainationGrid:"Netz {gridPrice}",modalExplainationFeedIn:"Einspeisung {feedInPrice}",modalServerStart:"Seit Serverstart {since}.",modalNoData:"noch nicht geladen",experimentalLabel:"Experimentell",experimentalText:"Unplausible Werte? Fragen zur Ansicht? Meld dich gerne in den"},sponsor:{thanks:"Danke f\xFCr deine Unterst\xFCtzung, {sponsor}! Das hilft uns bei der Weiterentwicklung.",confetti:"Lust auf etwas Sponsor-Konfetti?",supportUs:"Wir m\xF6chten effizientes Zuhause-Laden zum Standard f\xFCr m\xF6glichst viele Menschen machen. Helfe uns indem du die Weiterentwicklung und Pflege des Projekts unterst\xFCtzt.",sticker:"...oder evcc Sticker?",confettiPromise:"Es gibt auch Sticker und digitales Konfetti ;)",becomeSponsor:"Werde jetzt GitHub Sponsor"}},notifications:{modalTitle:"Meldungen",dismissAll:"Meldungen entfernen"},main:{energyflow:{noEnergy:"Kein Energiefluss",homePower:"Verbrauch",pvProduction:"Erzeugung",loadpoints:"Ladepunkt | Ladepunkt | {count} Ladepunkte",battery:"Batterie",batteryCharge:"Batterie laden",batteryDischarge:"Batterie entladen",gridImport:"Netzbezug",selfConsumption:"Eigenverbrauch",pvExport:"Einspeisung"},mode:{offShort:"Aus",offLong:"Aus",nowShort:"Sofort",nowLong:"Sofort",minpvShort:"Min",minpvLong:"Min + PV",pvShort:"PV",pvLong:"PV",fast:"Schnell",cheap:"G\xFCnstig"},loadpoints:"Wallbox",loadpoint:{fallbackName:"Ladepunkt",remoteDisabledSoft:"{source}: Adaptives PV-Laden deaktiviert",remoteDisabledHard:"{source}: Deaktiviert",power:"Leistung",charged:"Geladen",duration:"Dauer",remaining:"Restzeit"},vehicles:"Parkplatz",vehicle:{fallbackName:"Unbekanntes Fahrzeug",vehicleSoC:"Ladestand",targetSoC:"Ladeziel"},vehicleSoC:{disconnected:"getrennt",charging:"l\xE4dt",ready:"bereit",connected:"verbunden"},vehicleStatus:{minCharge:"Mindestladung bis {soc}%.",waitForVehicle:"Ladebereit. Warte auf Fahrzeug.",charging:"Ladevorgang aktiv.",targetChargePlanned:"Zielladen geplant. Ladung startet bald.",targetChargeWaitForVehicle:"Zielladen bereit. Warte auf Fahrzeug.",targetChargeActive:"Zielladen aktiv.",connected:"Verbunden.",pvDisable:"Zu wenig \xDCberschuss. Pausiere in {remaining}.",pvEnable:"\xDCberschuss verf\xFCgbar. Starte in {remaining}.",scale1p:"Reduziere auf einphasig in {remaining}.",scale3p:"Erh\xF6he auf dreiphasig in {remaining}.",unknown:""},provider:{login:"anmelden",logout:"abmelden"},targetCharge:{title:"Zielzeit",inactiveLabel:"Zielzeit",activeLabel:"{time} Uhr",modalTitle:"Zielzeit festlegen",setTargetTime:"keine",description:"Wann soll das Fahrzeug auf {targetSoC}% geladen sein?",today:"heute",tomorrow:"morgen",targetIsInThePast:"Zeitpunkt liegt in der Vergangenheit.",remove:"Keine Zielzeit",activate:"Zielzeit aktivieren",experimentalLabel:"Experimentell",experimentalText:`
        Diese Funktion ist in einem fr\xFChen Stadium. Der Algorithmus ist noch
        nicht perfekt. Die Zielzeit wird aktuell nicht persistiert - das
        hei\xDFt sie geht beim Neustart verloren. Verlasse dich also noch nicht
        zu sehr auf diese Funktion. Wir freuen uns aber \xFCber deine
        Erfahrungen und Verbessungsvorschl\xE4ge in den
      `}}},Ss={header:{docs:"Documentation",blog:"Blog",github:"GitHub",login:"Vehicle Logins",about:"About evcc"},footer:{version:{availableShort:"update",availableLong:"update available",modalTitle:"Update available",modalUpdateStarted:"Evcc will restart after the update..",modalInstalledVersion:"Currently installed version",modalNoReleaseNotes:"No release notes available. More information about the new version can be found here:",modalCancel:"Cancel",modalUpdate:"Update",modalUpdateNow:"Update now",modalDownload:"Download",modalUpdateStatusStart:"Update started: ",modalUpdateStatusFailed:"Update failed: "},savings:{footerShort:"{percent}% solar",footerLong:"{percent}% solar energy",modalTitleShort:"{total} kWh charged \xB7 {percent}% solar",modalTitleLong:"{total} kWh charged \xB7 {percent}% solar energy",modalChartGrid:"Grid energy {grid} kWh",modalChartSelf:"Solar energy {self} kWh",modalSavingsPrice:"Effective energy price",modalSavingsTotal:"Savings compared to grid",modalExplaination:"Calculation",modalExplainationGrid:"grid tariff {gridPrice}",modalExplainationFeedIn:"feed-in rate {feedInPrice}",modalServerStart:"since server start {since}.",modalNoData:"nothing charged yet",experimentalLabel:"Experimental",experimentalText:"Implausible values? Questions about this view? Feel free to join our "},sponsor:{thanks:"Thanks for your support, {sponsor}! It helps us with the further development.",confetti:"Ready for some sponsor confetti?",supportUs:"We want to make efficient home charging the standard for as many people as possible. Help us by supporting the further development and maintenance of the project.",sticker:"...or evcc stickers?",confettiPromise:"There will be stickers and digital confetti ;)",becomeSponsor:"Become a GitHub Sponsor"}},notifications:{modalTitle:"Notifications",dismissAll:"Dismiss all"},main:{energyflow:{noEnergy:"No Energyflow",homePower:"Consumption",pvProduction:"Production",loadpoints:"Loadpoint | Loadpoint | {count} Loadpoints",battery:"Battery",batteryCharge:"Battery charge",batteryDischarge:"Battery discharge",gridImport:"Grid import",selfConsumption:"Self consumption",pvExport:"Grid export"},mode:{offShort:"Stop",offLong:"Stop",nowShort:"Now",nowLong:"Now",minpvShort:"Min",minpvLong:"Min + PV",pvShort:"PV",pvLong:"PV",fast:"Fast",cheap:"Cheap"},loadpoints:"Wallbox",loadpoint:{fallbackName:"Loadpoint",remoteDisabledSoft:"{source}: adaptive PV charging disabled",remoteDisabledHard:"{source}: disabled",power:"Power",charged:"Charged",duration:"Duration",remaining:"Remaining"},vehicles:"Parking",vehicle:{fallbackName:"Anonymous Vehicle",vehicleSoC:"SoC",targetSoC:"Limit"},vehicleSoC:{disconnected:"disconnected",charging:"charging",ready:"ready",connected:"connected"},vehicleStatus:{minCharge:"minimum charging to {soc}%.",waitForVehicle:"Ready. Waiting for vehicle.",charging:"Charging.",targetChargePlanned:"Target charge planned. Charge starts soon.",targetChargeWaitForVehicle:"Target charge ready. Wait for vehicle.",targetChargeActive:"Target charge active.",connected:"Connected.",pvDisable:"Not enough surplus. Pausing in {remaining}.",pvEnable:"Surplus available. Starging in {remaining}.",scale1p:"Reduce to single phase in {remaining}.",scale3p:"Increase to three phase in {remaining}.",unknown:""},provider:{login:"login",logout:"logout"},targetCharge:{title:"Target Time",inactiveLabel:"Target time",activeLabel:"{time}",modalTitle:"Set Target Time",setTargetTime:"none",description:"When should the vehicle be charged to {targetSoC}%?",today:"today",tomorrow:"tomorrow",targetIsInThePast:"The chosen time is in the past.",remove:"Remove",activate:"Activate",experimentalLabel:"Experimental",experimentalText:`
        This function is at an early stage.
        The algorithm is not perfect yet.
        The target time is currently not persisted - this means, it will be lost when your server restarts.
        So do not rely too much on this function.
        However, we look forward to your experiences and suggestions for improvement in the
      `}}},Cs={header:{docs:"Documentazione",blog:"Blog",github:"GitHub",login:"Iscrizioni"},footer:{version:{version:"versione",availableShort:"aggiornamento",availableLong:"aggiornamento disponibile",modalTitle:"Aggiornamento disponibile",modalUpdateStarted:"Evcc ripartir\xE0 dopo l'aggiornamento..",modalInstalledVersion:"Versione correntemente installata",modalNoReleaseNotes:"Non ci sono note di rilascio disponibili. Altre informazioni circa la nuova versione si trovano qui:",modalCancel:"Cancella",modalUpdate:"Aggiorna",modalUpdateNow:"Aggiorna ora",modalDownload:"Download",modalUpdateStatusStart:"Aggiornamento iniziato: ",modalUpdateStatusFailed:"Aggiornamento fallito: "},sponsor:{sponsoredShort:"grazie",sponsoredLong:"grazie {sponsor}",supportProjectShort:"supporto",supportProjectLong:"supporta questo progetto"}},notifications:{modalTitle:"Notifiche",dismissAll:"Rimuovi tutte"},main:{energyflow:{noEnergy:"No Energyflow",homePower:"Consumption",pvProduction:"Produzione",battery:"Batteria",batteryCharge:"Battery charge",batteryDischarge:"Battery discharge",gridImport:"Grid import",selfConsumption:"Self consumption",pvExport:"Grid export"},mode:{title:"Modalit\xE0",stop:"Stop",now:"Ora",minpvShort:"Min",minpvLong:"Min + FV",pvShort:"FV",pvLong:"Solo FV"},loadpoint:{fallbackName:"Punto di carica",remoteDisabledSoft:"{source}: Ricarica FV adattiva disabilitata",remoteDisabledHard:"{source}: Disabilitato"},vehicle:{fallbackName:"Veicolo"},vehicleSoC:{disconnected:"disconesso",charging:"carica",ready:"pronto",connected:"collegato"},vehicleSubline:{mincharge:"carica minima fino a {soc}%"},provider:{login:"accedere",logout:"disconnettersi"},loadpointDetails:{power:"Potenza",vehicleRange:"Autonomia",charged:"Ricaricato",duration:"Duarata",remaining:"Rimanenti"}}};const $s="preferred_locale";function Ts(){const e=navigator.languages!==void 0?navigator.languages[0]:navigator.language;if(!!e)return e.trim().split(/-|_/)[0]}var ks=ke.exports.createI18n({locale:window.localStorage[$s]||Ts(),fallbackLocale:"en",messages:{de:ws,en:Ss,it:Cs}}),xs={install:e=>{e.config.globalProperties.$hiddenFeatures=window.localStorage.hidden_features==="true"}};xe.polyfill();const V=Ie({data(){return{notifications:[]}},methods:{raise:function(e){console[e.type](e);const o=new Date,a=this.notifications[0];a&&a.message===e.message?(a.count++,a.time=o):this.notifications=[O(R({},e),{count:1,time:o}),...this.notifications]},clear:function(){this.notifications=[]},error:function(e){e.type="error",this.raise(e)},warn:function(e){e.type="warn",this.raise(e)}},render:function(){return Pe(Ue,{notifications:this.notifications})}});V.use(ks);V.use(ys);V.use(De());V.use(Ne);V.use(xs);window.app=V.mount("#app");window.setInterval(function(){N.get("health").catch(function(){window.app.error({message:"Server unavailable"})})},5e3);
