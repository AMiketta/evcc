uri: 0.0.0.0:7070
interval: 10s
sponsortoken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Ik1pY2hhZWwgR2VlcnMiLCJleHAiOjE2NTA5MTAzMDEsInN1YiI6Im5hbHRhdGlzIn0.7QnUr9Hz5nF8SXQ8QdfIbbvC_mnehdgUNmFc2IBRX5s

log: debug
levels:
  cache: debug
  exec: debug
  script: debug
  savings: debug

# mqtt:
#   broker: localhost

#tariffs:
#  currency: EUR
#  grid:
#    type: fixed
#    price: 0.3 # EUR/kWh
#  feedin:
#    type: fixed
#    price: 0.08 # EUR/kWh

#hems:
#  type: shm

meters:
  - name: grid
    type: custom
    power:
      type: script
      cmd: /bin/sh -c 'echo $(((RANDOM%9000)-4000))'
  - name: pv
    type: custom
    power:
      type: script
      cmd: /bin/sh -c 'echo $(((RANDOM%15000)+2000))'
  - name: battery
    type: custom
    power:
      type: script
      cmd: /bin/sh -c 'echo $(((RANDOM%1000)-500))'
    energy:
      type: script
      cmd: /bin/sh -c 'echo 1000'
    soc:
      type: script
      cmd: /bin/sh -c 'echo 66'
  - name: charge-1
    type: custom
    power:
      type: script
      cmd: /bin/sh -c 'echo 7000'
    currents:
      - type: script
        cmd: /bin/sh -c 'echo 10.1'
      - type: script
        cmd: /bin/sh -c 'echo 10.4'
      - type: script
        cmd: /bin/sh -c 'echo 10'
  - name: charge-2
    type: custom
    power:
      type: script
      cmd: /bin/sh -c 'echo 3110'
    currents:
      - type: script
        cmd: /bin/sh -c 'echo 13'
      - type: script
        cmd: /bin/sh -c 'echo 0'
      - type: script
        cmd: /bin/sh -c 'echo 0'

chargers:
  - name: charger-1
    type: custom
    enable:
      type: script
      cmd: /bin/sh -c 'echo 1'
    enabled:
      type: script
      cmd: /bin/sh -c 'echo 1'
    status:
      type: script
      cmd: /bin/sh -c 'echo C'
    maxcurrent:
      type: script
      cmd: /bin/sh -c 'echo 20'

vehicles:
  - name: audi
    title: Skoda Enyaq
    type: custom
    soc:
      type: script
      cmd: /bin/sh -c 'echo 15'
    status:
      type: script
      cmd: /bin/sh -c 'echo A'
  - name: zoe
    title: Blaue Zoe
    type: custom
    soc:
      type: script
      cmd: /bin/sh -c 'echo 32'
    status:
      type: script
      cmd: /bin/sh -c 'echo B'

site:
  title: Ferienhaus
  meters:
    grid: grid
    pvs: [pv]
    battery: battery
  residualpower: 50

loadpoints:
  - title: eins
    mode: pv
    charger: charger-1
    soc:
      target: 80
    meters:
      charge: charge-1
    vehicles:
      - audi
      - zoe
  - title: zwo
    mode: pv
    charger: charger-1
    soc:
      target: 70
    meters:
      charge: charge-2
    vehicle: audi
    maxcurrent: 16
    phases: 1
